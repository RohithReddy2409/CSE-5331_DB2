
b1;TRANSACTION BEGINS, ID:1 TS:1 STATE=ACTIVE
r1(Y);Y IS READ LOCKED BY  T1
w1(Y);READ LOCK ON Y IS UPGRADED TO WRITE LOCK
r1(Z);Z IS READ LOCKED BY  T1
b3;TRANSACTION BEGINS, ID:3 TS:2 STATE=ACTIVE
r3(X);X IS READ LOCKED BY  T3
w3(X);READ LOCK ON X IS UPGRADED TO WRITE LOCK
w1(Z);READ LOCK ON Z IS UPGRADED TO WRITE LOCK
e1;TRANSACTION T1 IS COMMITTED
r3(Y);Y IS READ LOCKED BY  T3
b2;TRANSACTION BEGINS, ID:2 TS:3 STATE=ACTIVE
r2(Z);Z IS READ LOCKED BY  T2
w2(Z);READ LOCK ON Z IS UPGRADED TO WRITE LOCK
w3(Y);READ LOCK ON Y IS UPGRADED TO WRITE LOCK
e3;TRANSACTION T3 IS COMMITTED
r2(X);X IS READ LOCKED BY  T2
w2(X);READ LOCK ON X IS UPGRADED TO WRITE LOCK
e2;TRANSACTION T2 IS COMMITTED